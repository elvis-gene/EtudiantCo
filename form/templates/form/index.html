{% extends 'website/base.html' %}
{% load widget_tweaks %}

{% block title %}Enregistrement{% endblock %}
{% block content %}


<div class="container w-75 pt-4 pb-2 text-justify">
    <p>Nous, etudiants congolais en Afrique du Sud, faisons face à un chalenge quand il s'agit de renouveler
      nos passeports. Nous sommes obligés de repartir au pays pour le faire et cela pose un
      vrai problème pour plusieurs raisons. C'est pour cela que l'association des etudiants congolais en afrique
      du Sud qui se chargent de plusieurs affaires nous concernant s'etaient plaints auprès de l'ambassadeur
       concernant ce problème. Et la solution avait été de recenser le nombre d'etudiants
      comme ça ils pourront décider s'il faudra avoir une machine en afrique du sud...</p>
</div>


<div class="container w-75">
  <form class="needs-validation" action="{% url 'form:process_form' %}" method="post" novalidate>
  {% csrf_token %}

  <div class="row form-group">
      <div class="col">
        <label for="inputSurname">Nom:</label>
          {% if form.is_bound %}
            {% if form.surname.errors %}
              {% render_field form.surname class="form-control is-invalid" maxlength="50" id="inputSurname" placeholder="Nom" name="surname" required="True" %}
              <div class="invalid-feedback">
                Veuillez entrer votre nom, s'il vous plait.
              </div>

            {% else %}
              {% render_field form.surname class="form-control is-valid" maxlength="50" id="inputSurname" placeholder="Nom" name="surname" required="True" %}
              <div class="valid-feedback">
                Génial!
              </div>
            {% endif %}

          {% else %}
            {% render_field form.surname class="form-control" maxlength="50" id="inputSurname" placeholder="Nom" name="surname" required="True" %}
          {% endif %}

          {% if form.surname.help_text %}
            <small class="form-text text-muted">{{ form.surname.help_text }}</small>
          {% endif %}

      </div>

      <div class="col">
        <label for="inputName">Prenom:</label>
          {% if form.is_bound %}
            {% if form.first_name.errors %}
              {% render_field form.first_name class="form-control is-invalid" maxlength="50" id="inputName" placeholder="Prenom" name="first_name" required="True" %}
              <!-- <div class="invalid-feedback">
                Veuillez entrer votre nom, s'il vous plait.
              </div> -->

              {% for error in form.first_name.errors %}
                <div class="invalid-feedback">
                  Veuillez entrer votre nom, s'il vous plait.
                </div>
              {% endfor %}

            {% else %}
              {% render_field form.first_name class="form-control is-valid" maxlength="50" id="inputName" placeholder="Prenom" name="first_name" required="True" %}
              <div class="valid-feedback">
                Génial!
              </div>
            {% endif %}

          {% else %}
            {% render_field form.first_name class="form-control" maxlength="50" id="inputName" placeholder="Prenom" name="first_name" required="True" %}
          {% endif %}

          <small class="form-text text-muted">Veuillez entrer votre nom, s'il vous plait.</small>

      </div>
    </div>

      <div class="text-center">
            <button type="submit" class="btn btn-success btn-sm">S'enregistrer</button>
      </div>

  </form>
</div>


<div class="container w-50 pt-4">
<button
      type="button"
      class="btn btn-outline-success btn-sm btn-block"
      data-toggle="modal"
      data-target=".bd-modal-md">
      Le Savais Tu?
    </button>
</div>

<div class="modal bd-modal-md" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Opportunité De Bourse</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="text-justify">
          Savez vous que les etudiants congolais etudiant en Afrique du Sud peuvent percevoir des bources du gouvernement?
          Allez sour la page 'Nouvelles' pour plus de details.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-success btn-sm">Fermer</button>
      </div>
    </div>
  </div>
</div>



<script>

(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();
</script>

<script>
    var today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
    $('#expirationDate').datepicker({
        uiLibrary: 'bootstrap4',
        iconsLibrary: 'fontawesome',
        minDate: today,
    });
</script>

{% endblock %}

<!-- TODO:
Fix validation with Date: it should not allow text to be input.
Use the patter tag for regular expressions

-->
